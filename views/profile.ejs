<%- include('partials/header') %>

<div class="main-content">
  <h1>User Profile</h1>
  <% if (user) { %>
  <p>Welcome to your profile page, <%= user.username %>.</p>

  <h2>Your Created Polls</h2>
  <% if (polls && polls.length > 0) { %>
  <ul>
    <% polls.forEach(poll => { %>
    <li>
      <a href="/poll/<%= poll._id %>"><%= poll.question %></a>
    </li>
    <% }); %>
  </ul>
  <% } else { %>
  <p>
    You have not created any polls yet.<br />
    <a href="/dashboard" class="action-button">Create one now</a>
  </p>
  <% } %>

  <h2>Polls You Voted On</h2>
  <% if (votedPolls && votedPolls.length > 0) { %>
  <ul>
    <% votedPolls.forEach(votedPoll => { %>
    <li>
      <a href="/poll/<%= votedPoll._id %>"><%= votedPoll.question %></a>
    </li>
    <% }); %>
  </ul>
  <% } else { %>
  <p>You have not voted on any polls yet.</p>
  <% } %> <% } else { %>
  <p>
    You are not logged in. Please <a href="/login">log in</a> to view your
    profile.
  </p>
  <% } %>
</div>

<%- include('partials/footer') %>
